<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>반려동물 장례식장 - 회원가입</title>

  <!-- Bootstrap (기존 유지) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="../CSS/Signup.css">
  <link rel="stylesheet" href="../CSS/common.css">


</head>

<body>
  <div class="header-wrapper">
    <header>
      <div class="logo">
        <a href="#"><img src="../Asset/LastPage로고_투명.png" alt="로고" /></a>
      </div>
      <nav>
        <ul>
          <li>
            <a href="#">홈</a>
            <ul>
              <li><a href="#">인사말</a></li>
            </ul>
          </li>
          <li><a href="#">장례서비스</a></li>
          <li><a href="#">Ourpage</a></li>
          <li>
            <a href="#">심리상담</a>
            <ul>
              <li><a href="#">상담예약</a></li>
              <li><a href="#">예약조회</a></li>
            </ul>
          </li>
          <li>
            <a href="#">추모굿즈</a>
            <ul>
              <li><a href="#">굿즈소개</a></li>
              <li><a href="#">굿즈예약</a></li>
              <li><a href="#">예약조회</a></li>
            </ul>
          </li>
          <li><a href="#">마이페이지</a></li>
          <li><a href="#">고객센터</a></li>
        </ul>
      </nav>
      <div class="auth">
        <a href="#">로그인</a>
        <a href="#">회원가입</a>
      </div>
    </header>
  </div>


  <!-- 배너 -->
  <section class="banner" role="img" aria-label="따뜻한 펫로스 심리상담 배너 이미지">
    <div class="inner">
      <h1>슬픔을 혼자 두지 말아요</h1>
      <p>상담 예약과 기록, 필요한 순간에 곁에 두세요.</p>
    </div>
  </section>

  <main>
    <div class="wrap">
      <form class="card" id="signupForm" autocomplete="off">
        <h1>회원가입하기</h1>

        <!-- 이름 -->
        <label class="field" aria-label="이름">
          <input type="text" id="name" placeholder="이름" required>
        </label>

        <!-- 아이디 -->
        <label class="field" aria-label="아이디">
          <input type="text" id="username" placeholder="아이디" required>
        </label>

        <!-- 비밀번호 -->
        <div>
          <label class="field" aria-label="비밀번호" style="margin-bottom:6px">
            <input type="password" id="password" placeholder="비밀번호 (8~16자 영문 대소문자/숫자/특수문자를 사용하세요.)" required>
            <button type="button" class="eye-btn" id="togglePw" aria-label="비밀번호 표시 전환">
              <svg id="eyeOpenPw" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z" />
                <circle cx="12" cy="12" r="3.5" />
              </svg>
              <svg id="eyeClosedPw" style="display:none" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="1.8">
                <path
                  d="M17.94 17.94C16.14 19.24 14.19 20 12 20 5 20 1 12 1 12a20.1 20.1 0 0 1 6.06-6.06M22.99 12s-1.13 2.16-3.18 4.16M3 3l18 18" />
              </svg>
            </button>
          </label>
          <div id="capsHint" class="hint" role="alert" aria-live="polite" style="display:none;">Caps Lock이 켜져 있습니다.
          </div>
        </div>

        <!-- 비밀번호 확인 -->
        <label class="field" aria-label="비밀번호 확인">
          <input type="password" id="passwordConfirm" placeholder="비밀번호 확인" required>
          <button type="button" class="eye-btn" id="togglePw2" aria-label="비밀번호 확인 표시 전환">
            <svg id="eyeOpenPw2" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
              <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z" />
              <circle cx="12" cy="12" r="3.5" />
            </svg>
            <svg id="eyeClosedPw2" style="display:none" viewBox="0 0 24 24" fill="none" stroke="currentColor"
              stroke-width="1.8">
              <path
                d="M17.94 17.94C16.14 19.24 14.19 20 12 20 5 20 1 12 1 12a20.1 20.1 0 0 1 6.06-6.06M22.99 12s-1.13 2.16-3.18 4.16M3 3l18 18" />
            </svg>
          </button>
        </label>

        <!-- 이메일 + 도메인 선택 -->
        <label class="field compact" aria-label="이메일">
          <input type="text" id="emailId" placeholder="이메일" required style="min-width:160px;">
          <span class="at">@</span>
          <input type="text" id="emailDomain" placeholder="이메일 도메인" required style="min-width:160px;">
          <select id="domainSelect" aria-label="이메일 도메인 선택" style="min-width:140px;">
            <option value="">직접입력</option>
            <option value="naver.com">naver.com</option>
            <option value="gmail.com">gmail.com</option>
            <option value="daum.net">daum.net</option>
          </select>
        </label>

        <!-- 생년월일 -->
        <label class="field" aria-label="생년월일">
          <input type="text" id="birthY" class="w-33" inputmode="numeric" maxlength="4" placeholder="연도(4자)" required>
          <input type="text" id="birthM" class="w-33" inputmode="numeric" maxlength="2" placeholder="월" required>
          <input type="text" id="birthD" class="w-33" inputmode="numeric" maxlength="2" placeholder="일" required>
        </label>

        <!-- 성별 -->
        <div class="field" aria-label="성별" style="gap:18px;">
          <label><input type="radio" name="gender" value="none" required> 선택안함</label>
          <label><input type="radio" name="gender" value="male"> 남</label>
          <label><input type="radio" name="gender" value="female"> 여</label>
        </div>

        <!-- 휴대폰 인증 -->
        <div class="field" aria-label="휴대폰">
          <input type="text" id="phone" class="phone-input" placeholder="휴대폰(본인명의 필수)" required>
          <button type="button" class="btn" id="btnSms">인증하기</button>
        </div>

        <!-- SMS 코드 -->
        <div class="field" aria-label="SMS 인증번호">
          <input type="text" id="smsCode" class="sms-input" placeholder="SMS 인증 번호 입력" required>
          <button type="button" class="btn" id="btnSmsVerify">확인</button>
        </div>

        <hr style="border:none; border-top:2px solid var(--border); margin:6px 0 0;" />

        <!-- 제출 -->
        <div class="actions">
          <button type="submit" class="btn">회원가입하기</button>
        </div>

        <!-- 링크 -->
        <div class="links" aria-label="바로가기">
          <a href="#">로그인</a><span>·</span>
          <a href="#">고객센터</a>
        </div>
      </form>
    </div>
  </main>

  <footer>
    대충 연락처 / GitHub 주소 / 이메일 등 입력 예정/ 푸터 높이는 헤더 배너 반응 테스트용.
  </footer>

  <script>
    // 헤더 스크롤 시 숨김 (기존 유지)
    (function () {
      const header = document.querySelector('header');
      window.addEventListener('scroll', () => {
        header.style.top = (window.scrollY > 200) ? '-120px' : '0';
      });
    })();

    // ScrollSpy 초기화 (기존 유지: 대상 엘리먼트가 있을 때만 동작)
    document.addEventListener("DOMContentLoaded", function () {
      try {
        new bootstrap.ScrollSpy(document.body, { target: '#list-example', offset: 100 });
      } catch (e) { }
    });

    // 이메일 도메인 선택 -> 입력란 자동 반영
    const domainSelect = document.getElementById('domainSelect');
    const emailDomain = document.getElementById('emailDomain');
    domainSelect.addEventListener('change', () => {
      if (domainSelect.value) {
        emailDomain.value = domainSelect.value;
        emailDomain.readOnly = true;
      } else {
        emailDomain.value = '';
        emailDomain.readOnly = false;
        emailDomain.focus();
      }
    });


// 비밀번호 보기/숨기기 + 아이콘 동기화 + Caps Lock 힌트 (password 전용)
document.addEventListener('DOMContentLoaded', () => {
  const $ = (id) => document.getElementById(id);

  // 필드
  const pw  = $('password');
  const pw2 = $('passwordConfirm');

  // 아이콘 (열림/닫힘)
  const eyeOpenPw    = $('eyeOpenPw');    // 눈 뜸
  const eyeClosedPw  = $('eyeClosedPw');  // 눈 감김
  const eyeOpenPw2   = $('eyeOpenPw2');
  const eyeClosedPw2 = $('eyeClosedPw2');

  // 토글 버튼
  const toggleBtnPw  = $('togglePw');
  const toggleBtnPw2 = $('togglePw2');

  // Caps Lock 힌트 (선택)
  const capsHint = $('capsHint');

  // 현재 input 상태에 맞춰 아이콘 표시 동기화
  function syncIcon(input, openEl, closedEl) {
    if (!input || !openEl || !closedEl) return;
    const isVisible = (input.type === 'text');      // 보이는 상태?
    openEl.style.display  = isVisible ? 'block' : 'none'; // 보이면 눈 뜸
    closedEl.style.display = isVisible ? 'none'  : 'block'; // 가리면 눈 감김
  }

  // 토글 바인딩: 타입 먼저 토글 -> 아이콘 동기화 (첫 클릭 문제 방지)
  function bindEyeToggle(input, toggleBtn, openEl, closedEl) {
    if (!input || !toggleBtn || !openEl || !closedEl) return;
    toggleBtn.addEventListener('click', () => {
      input.type = (input.type === 'password') ? 'text' : 'password';
      syncIcon(input, openEl, closedEl);
      // UX: 포커스 유지 + 커서 끝으로
      input.focus({ preventScroll: true });
      const v = input.value; input.value = ''; input.value = v;
    });
  }

  // Caps Lock 힌트 연결
  function attachCapsLockHint(input, hintEl) {
    if (!input || !hintEl) return;
    const updateCaps = (e) => {
      const on = e.getModifierState && e.getModifierState('CapsLock');
      hintEl.style.display = on ? 'block' : 'none';
    };
    input.addEventListener('keydown', updateCaps);
    input.addEventListener('keyup',   updateCaps);
    input.addEventListener('focus',   updateCaps);
    input.addEventListener('blur',    () => hintEl.style.display = 'none');
  }

  // 초기 아이콘 상태 동기화 + 이벤트 바인딩
  if (pw && eyeOpenPw && eyeClosedPw && toggleBtnPw) {
    syncIcon(pw, eyeOpenPw, eyeClosedPw);
    bindEyeToggle(pw, toggleBtnPw, eyeOpenPw, eyeClosedPw);
    attachCapsLockHint(pw, capsHint);
  }
  if (pw2 && eyeOpenPw2 && eyeClosedPw2 && toggleBtnPw2) {
    syncIcon(pw2, eyeOpenPw2, eyeClosedPw2);
    bindEyeToggle(pw2, toggleBtnPw2, eyeOpenPw2, eyeClosedPw2);
    attachCapsLockHint(pw2, capsHint); // 같은 힌트 재사용 가능
  }
});



    // 데모용: 휴대폰 인증/검증 버튼
    document.getElementById('btnSms').addEventListener('click', () => {
      if (!document.getElementById('phone').value.trim()) { alert('휴대폰 번호를 입력해 주세요.'); return; }
      alert('인증번호가 발송되었습니다. (데모)');
    });
    document.getElementById('btnSmsVerify').addEventListener('click', () => {
      if (!document.getElementById('smsCode').value.trim()) { alert('인증번호를 입력해 주세요.'); return; }
      alert('인증이 완료되었습니다. (데모)');
    });

    // 제출(데모 검증: 필수 필드 + 비밀번호 일치 확인)
    document.getElementById('signupForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const requiredIds = ['name', 'username', 'password', 'passwordConfirm', 'emailId', 'emailDomain', 'birthY', 'birthM', 'birthD', 'phone', 'smsCode'];
      for (const id of requiredIds) {
        const el = document.getElementById(id);
        if (!el || !el.value.trim()) { alert('필수 항목을 입력해 주세요.'); el && el.focus(); return; }
      }
      if (pw.value !== pw2.value) { alert('비밀번호가 일치하지 않습니다.'); pw2.focus(); return; }
      alert('회원가입 제출(데모). 실제 API 연동으로 대체하세요.');
    });
  </script>
</body>

</html>