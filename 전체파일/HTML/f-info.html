<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>반려동물 장례식장 - 장례안내</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- CSS (공통 먼저, 페이지 전용 나중) -->
  <link rel="stylesheet" href="../CSS/common.css">
  <link rel="stylesheet" href="../CSS/F-info.css">

  <!-- Naver Maps SDK: 한 줄만! (지오코딩 서브모듈 포함) -->
 <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=7lrqgg6pwj&submodules=geocoder"></script>
  
</head>

<body>
  <div class="header-wrapper">
    <header>
      <div class="logo">
        <a href="#"><img src="../Asset/LastPage로고_투명.png" alt="로고" /></a>
      </div>
      <nav>
        <ul>
          <li>
            <a href="#">홈</a>
            <ul><li><a href="#">인사말</a></li></ul>
          </li>
          <li><a href="#">장례서비스</a></li>
          <li><a href="#">Ourpage</a></li>
          <li>
            <a href="#">심리상담</a>
            <ul>
              <li><a href="#">상담예약</a></li>
              <li><a href="#">예약조회</a></li>
            </ul>
          </li>
          <li>
            <a href="#">추모굿즈</a>
            <ul>
              <li><a href="#">굿즈소개</a></li>
              <li><a href="#">굿즈예약</a></li>
              <li><a href="#">예약조회</a></li>
            </ul>
          </li>
          <li><a href="#">마이페이지</a></li>
          <li><a href="#">고객센터</a></li>
        </ul>
      </nav>
      <div class="auth">
        <a href="#">로그인</a>
        <a href="#">회원가입</a>
      </div>
    </header>
  </div>

  <!-- 배너 -->
  <section class="banner" role="img" aria-label="따뜻한 펫로스 심리상담 배너 이미지">
    <div class="inner">
      <h1>작별의 순간, 혼자 두지 않겠습니다</h1>
      <p>그리움이 아프지 않도록, 기억을 천천히 다독입니다.</p>
    </div>
  </section>

  <div class="wrap">
    <h1 class="title">반려동물 장례 서비스 안내</h1>
    <div class="grid">
      <div id="map" aria-label="장례식장 위치 지도"></div>
      <div class="list" id="placeList"></div>
    </div>
  </div>

  <!-- 서비스 4개(임시 이미지 박스) -->
  <section class="card" style="margin-top:18px;">
    <h2 class="section-title">우리가 제공하는 서비스</h2>
    <div class="service-grid">
      <article class="service-card">
        <div class="img-ph">이미지 자리 (장례식장 예약 대행)</div>
        <h3>장례식장 예약 대행</h3>
        <p>시간·장소·종류(개별/가족 화장)까지 상황에 맞춘 예약을 도와드립니다.</p>
        <ul>
          <li>지역·예산·일정 기준 최적 매칭</li>
          <li>필요 서류·준비물 체크리스트 제공</li>
          <li>현장 진행 팁과 동선 안내</li>
        </ul>
      </article>

      <article class="service-card">
        <div class="img-ph">이미지 자리 (펫로스 상담 제공)</div>
        <h3>펫로스에 대한 상담 제공</h3>
        <p>전담 상담사가 애도의 속도에 맞춰 안전하게 동행합니다.</p>
        <ul>
          <li>비대면/대면 선택, 1:1 또는 가족 동반</li>
          <li>회기 사이 셀프케어 가이드</li>
          <li>긴급 감정 케어(사전 예약)</li>
        </ul>
      </article>

      <article class="service-card">
        <div class="img-ph">이미지 자리 (추모공간-온라인 부동산)</div>
        <h3>추모공간 (온라인 부동산)</h3>
        <p>사진·영상·메모를 남길 수 있는 온라인 봉안당 형태의 공간을 제공합니다.</p>
        <ul>
          <li>개별 룸(주소/링크) 발급, 접근 권한 관리</li>
          <li>기일 알림, 헌화/메시지 기능</li>
          <li>실물 유골함 보관 장소 연동</li>
        </ul>
      </article>

      <article class="service-card">
        <div class="img-ph">이미지 자리 (커뮤니티)</div>
        <h3>서로 대화 가능한 커뮤니티</h3>
        <p>비슷한 경험을 가진 사람들과 조용히 연결되고 위로받을 수 있어요.</p>
        <ul>
          <li>익명 닉네임, 주제별 게시판</li>
          <li>정기 모임·워크숍 안내</li>
          <li>신고·차단 등 안전 장치</li>
        </ul>
      </article>
    </div>
  </section>

  <footer>
    대충 연락처 / GitHub 주소 / 이메일 등 입력 예정/ 푸터 높이는 헤더 배너 반응 테스트용.
  </footer>

  <!-- 지도 스크립트 -->
  <script>
    // 주소 기반 3개 장소 (마커/리스트/링크)
    const places = [
      {
        name: "펫포레스트 경기광주점",
        address: "경기도 광주시 오포안로 77 (문형동 749-5)",
        tel: "1577-0996",
        url: "https://petforest.co.kr/",
        naver: "https://map.naver.com/v5/search/%ED%8E%AB%ED%8F%AC%EB%A0%88%EC%8A%A4%ED%8A%B8%20%EA%B2%BD%EA%B8%B0%EA%B4%91%EC%A3%BC%EC%A0%90",
        features: ["유골함 보관장소 제공", "펫로스 상담 제공", "커뮤니티 제공"]
      },
      {
        name: "대구러브펫",
        address: "대구광역시 달서구 문화회관9길 71 (장동 50)",
        tel: "053-593-4900",
        url: "http://dglovepet.kr/",
        naver: "https://map.naver.com/v5/search/%EB%8C%80%EA%B5%AC%EB%9F%AC%EB%B8%8C%ED%8E%AB",
        features: ["유골함 보관장소 제공", "펫로스 상담 제공", "커뮤니티 제공"]
      },
      {
        name: "스타티스",
        address: "부산광역시 기장군 일광면 차양길 175",
        tel: "051-728-5411",
        url: "https://www.startice.co.kr/",
        naver: "https://map.naver.com/v5/search/%EC%8A%A4%ED%83%80%ED%8B%B0%EC%8A%A4%20%EA%B8%B0%EC%9E%A5",
        features: ["유골함 보관장소 제공", "펫로스 상담 제공", "커뮤니티 제공"]
      }
    ];

    // 페이지/SDK 로드 완료 후 초기화
    window.addEventListener('load', () => {
      if (!window.naver || !window.naver.maps) {
        console.error('네이버 지도 SDK가 로드되지 않았습니다.');
        alert('지도가 로드되지 않았습니다. Client ID/도메인 등록을 확인해주세요.');
        return;
      }

      const map = new naver.maps.Map('map', {
        center: new naver.maps.LatLng(37.5665, 126.9780), // 서울 시청 근처
        zoom: 8,
        zoomControl: true
      });

      const bounds = new naver.maps.LatLngBounds();
      const info   = new naver.maps.InfoWindow({ maxWidth: 260, anchorSize: new naver.maps.Size(12, 8) });

      // 카드 렌더
      function appendCard(p, onClick){
        const wrap = document.getElementById('placeList');
        const el = document.createElement('article');
        el.className = 'card';
        el.innerHTML = `
          <h3>${p.name}</h3>
          <div class="addr">${p.address}</div>
          <div class="chips">${p.features.map(f=>`<span class="chip">${f}</span>`).join('')}</div>
          <div class="links">
            ${p.tel ? `<a href="tel:${p.tel.replace(/[^0-9]/g,'')}">전화</a>` : ''}
            <a href="${p.naver}" target="_blank" rel="noopener">네이버지도</a>
            <a href="${p.url}" target="_blank" rel="noopener">홈페이지</a>
            <a href="#" class="seeOnMap">지도에서 보기</a>
          </div>
        `;
        el.querySelector('.seeOnMap').addEventListener('click', (e)=>{ e.preventDefault(); onClick(); });
        wrap.appendChild(el);
      }

      // 인포윈도우 열기
      function openInfo(p, marker){
        info.setContent(`
          <div style="padding:8px 10px; line-height:1.5;">
            <div style="font-weight:700; margin-bottom:4px;">${p.name}</div>
            <div style="font-size:13px; color:#666;">${p.address}</div>
            <div style="font-size:13px; color:#666; margin-top:2px;">${p.tel ? '☎ ' + p.tel : ''}</div>
            <div style="margin-top:6px;">
              <a href="${p.naver}" target="_blank" rel="noopener">네이버지도</a> ·
              <a href="${p.url}" target="_blank" rel="noopener">홈페이지</a>
            </div>
          </div>
        `);
        info.open(map, marker);
      }

      // 주소 → 좌표 변환 후 마커 생성
      function addPlace(p) {
        if (!naver.maps.Service || !naver.maps.Service.geocode) {
          console.error('Geocoder 서브모듈이 로드되지 않았습니다. SDK URL에 &submodules=geocoder 를 추가하세요.');
          return;
        }
        naver.maps.Service.geocode({ query: p.address }, (status, resp) => {
          if (status !== naver.maps.Service.Status.OK) {
            console.warn('지오코딩 실패:', p.address, status);
            return;
          }
          const item = resp.v2.addresses[0];
          if (!item) {
            console.warn('지오코딩 결과 없음:', p.address);
            return;
          }

          const latlng = new naver.maps.LatLng(item.y, item.x);
          bounds.extend(latlng);

          const marker = new naver.maps.Marker({ map, position: latlng, title: p.name });
          marker.addListener('click', () => openInfo(p, marker));

          appendCard(p, () => {
            openInfo(p, marker);
            map.panTo(latlng);
            map.setZoom(12, true);
          });

          map.fitBounds(bounds);
        });
      }

      places.forEach(addPlace);
    });
  </script>
</body>
</html>
