<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- ê³µí†µì˜ì—­ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <!-- <link rel="stylesheet" href="./common.html"> -->
    <link rel="stylesheet" th:href="@{css/common.css}">
    <link rel="stylesheet" th:href="@{css/Mypage.css}">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <title>ë§ˆì´í˜ì´ì§€</title>

</head>

<body data-bs-spy="scroll" data-bs-target="#list-example" data-bs-offset="100" tabindex="0">

<!-- ì‚¬ì´ë“œ ScrollSpy ë°°ë„ˆ -->
<div id="list-example" class="list-group">
    <a class="list-group-item list-group-item-action" href="#Commu-wrapper">Ourpage</a>
    <a class="list-group-item list-group-item-action" href="#Funeral-wrapper">ì¥ë¡€ì„œë¹„ìŠ¤</a>
    <a class="list-group-item list-group-item-action" href="#Psy-counsel-wrapper">ì‹¬ë¦¬ì¹˜ë£Œ</a>
    <a class="list-group-item list-group-item-action" href="#Goods-wrapper">ì¶”ëª¨ë¬¼í’ˆ</a>
</div>

<div class="header-wrapper">
    <!-- í—¤ë” -->
    <header>
        <div class="logo">
            <a href="#"><img src="../Asset/LastPageë¡œê³ _íˆ¬ëª….png" alt="ë¡œê³ " /></a>
        </div>
        <nav>
            <ul>
                <li>
                    <a href="#">í™ˆ</a>
                    <ul>
                        <li><a href="#">ì¸ì‚¬ë§</a></li>
                    </ul>
                </li>

                <li><a href="#">ì¥ë¡€ì„œë¹„ìŠ¤</a></li>
                <li><a href="#">Ourpage</a></li>
                <li>
                    <a href="#">ì‹¬ë¦¬ìƒë‹´</a>
                    <ul>
                        <li><a href="#">ìƒë‹´ì˜ˆì•½</a></li>
                        <li><a href="#">ì˜ˆì•½ì¡°íšŒ</a></li>
                    </ul>
                </li>

                <li>
                    <a href="#">ì¶”ëª¨êµ¿ì¦ˆ</a>
                    <ul>
                        <li><a href="#">êµ¿ì¦ˆì†Œê°œ</a></li>
                        <li><a href="#">êµ¿ì¦ˆì˜ˆì•½</a></li>
                        <li><a href="#">ì˜ˆì•½ì¡°íšŒ</a></li>
                    </ul>
                </li>
                <li>
                    <!-- ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ë™ì‘ -->
                    <a th:if="${loginUser != null}" th:href="@{/mypage}">ë§ˆì´í˜ì´ì§€</a>
                    <a th:if="${loginUser == null}" href="javascript:void(0);"
                       onclick="alert('ë¡œê·¸ì¸ í›„ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.'); window.location.href='/signin';">
                        ë§ˆì´í˜ì´ì§€
                    </a>
                </li>
                <li><a href="#">ê³ ê°ì„¼í„°</a></li>
            </ul>
        </nav>
        <!-- ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ì „í™˜ -->
        <div th:if="${loginUser != null}" class="auth">
            <a href="/logout" th:onclick="|logout()|">ë¡œê·¸ì•„ì›ƒ</a>
        </div>
        <div th:if="${loginUser == null}" class="auth">
            <a href="/signin">ë¡œê·¸ì¸</a>
            <a href="/signup">íšŒì›ê°€ì…</a>
        </div>
    </header>

    <!-- ë©”ì¸ -->
    <main>
        <!-- ì¸ì‚¿ë§ -->
        <div class="hello_yj">
            <div class="logo_yj">
                <img style="width: 300px;" src="../Asset/LastPageë¡œê³ _íˆ¬ëª….png" alt="" />
            </div>
            <div class="mypage_yj">
                <p>MY PAGE</p>
                <div class="greeting_yj" id="greeting"></div>
            </div>
        </div>

        <!-- ì¥ë¡€ì˜ˆì•½ -->
        <p class="subtitle_yj">ì˜ˆì•½ë‚´ì—­</p>
        <div th:if="${reserves != null and #lists.isEmpty(reserves) == false}">
            <div class="reserv_yj effect_yj" th:each="reserve : ${reserves}">
                <div class="reserv-header_yj">
                    <div class="reserv-left_yj">
                    <span class="material-symbols-outlined">
                        calendar_month
                    </span>
                        <p>ì¥ë¡€ì˜ˆì•½</p>
                    </div>
                    <!-- ì˜ˆì•½ë‚´ì—­ í˜ì´ì§€ ì¶”í›„ ì´ë™ -->
                    <a href="">ì˜ˆì•½ë³€ê²½ | ì·¨ì†Œ ></a>
                </div>
                <!-- ì˜ˆì•½ë‚´ì—­ í…Œì´ë¸” -->
                <div class="reserv-content_yj">
                    <div class="reserv-row_yj">
                        <div class="time-info_yj">
                            <p class="start-time_yj" th:text="${reserve.time}"></p>
                        </div>
                        <div class="icon-duration_yj">
                            <span class="material-symbols-outlined">
                                line_start
                            </span>
                            <span class="material-symbols-outlined">
                                local_florist
                            </span>
                            <span class="material-symbols-outlined">
                                line_end
                            </span>
                            <p>01ì‹œê°„ 00ë¶„</p>
                        </div>
                        <div class="time-info_yj">
                            <p class="end-time_yj"></p>
                        </div>
                    </div>

                    <div class="reserv-details_yj">
                        <div>
                            <span>ì˜ˆì•½ë‚ ì§œ</span>
                            <p th:text="${reserve.funeralDate}"></p>
                        </div>
                        <div>
                            <span>ì˜ˆì•½ì¥ì†Œ</span>
                            <p th:text="${reserve.place}"></p>
                        </div>
                        <div>
                            <span>ìš”ì²­ì‚¬í•­</span>
                            <p th:text="${reserve.memo != null ? reserve.memo : 'ìš”ì²­ì‚¬í•­ ì—†ìŒ'}"></p>
                        </div>
                        <div>
                            <span>ì˜ˆì•½ìƒíƒœ</span>
                            <button>ì˜ˆì•½ì™„ë£Œ</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div th:if="${reserves == null or #lists.isEmpty(reserves)}">
            <p class="text-center">ì˜ˆì•½ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
        </div>

        <!-- ìƒë‹´ì˜ˆì•½ -->
        <div class="reserv_yj effect_yj">
            <div class="reserv-header_yj">
                <div class="reserv-left_yj">
                        <span class="material-symbols-outlined">
                            diversity_4
                        </span>
                    <p>ìƒë‹´ì˜ˆì•½</p>
                </div>
                <!-- ì˜ˆì•½ë‚´ì—­ í˜ì´ì§€ ì¶”í›„ ì´ë™ -->
                <a href="">ì˜ˆì•½ë³€ê²½ | ì·¨ì†Œ ></a>
            </div>
            <!-- ì˜ˆì•½ë‚´ì—­ í…Œì´ë¸” -->
            <div class="reserv-content_yj">
                <!-- ì¶”í›„ ì˜ˆì•½ë‚´ìš© ì—°ê²° -->
                <div class="reserv-details_yj">
                    <div>
                        <span>ìƒë‹´ë‚ ì§œ</span>
                        <p>2025-10-11</p>
                    </div>
                    <div>
                        <span>ìƒë‹´ì‹œê°„</span>
                        <p>10:00-11:00</p>
                    </div>
                    <div>
                        <span>ìƒë‹´ì‚¬</span>
                        <p>ì‹¬ì˜ˆì§„ ìƒë‹´ì‚¬</p>
                    </div>
                    <div>
                        <span>ë©”ëª¨</span>
                        <p>í˜ë“¤ì–´ìš” ã…œã…œ</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- êµ¿ì¦ˆ êµ¬ë§¤ë‚´ì—­ -->
        <div class="reserv_yj effect_yj">
            <div class="reserv-header_yj">
                <div class="reserv-left_yj">
                        <span class="material-symbols-outlined">
                            shoppingmode
                        </span>
                    <p>êµ¬ë§¤ë‚´ì—­</p>
                </div>
                <!-- ì˜ˆì•½ë‚´ì—­ í˜ì´ì§€ ì¶”í›„ ì´ë™ -->
                <a href=""> êµ¬ë§¤ì·¨ì†Œ ></a>
            </div>
            <!-- ì˜ˆì•½ë‚´ì—­ í…Œì´ë¸” -->
            <div class="reserv-content_yj">
                <!-- ì¶”í›„ ì˜ˆì•½ë‚´ìš© ì—°ê²° -->
                <div class="reserv-details_yj">
                    <div>
                        <span>êµ¬ë§¤ì œí’ˆ</span>
                        <p>ë©”ëª¨ë¦¬ì–¼ ìŠ¤í†¤</p>
                    </div>
                    <div>
                        <span>ìˆ˜ëŸ‰</span>
                        <p>1</p>
                    </div>
                    <div>
                        <span>êµ¬ë§¤ì¼</span>
                        <p>2025-11-01</p>
                    </div>
                    <div>
                        <span>ë°°ì†¡í˜„í™©</span>
                        <button>ì£¼ë¬¸ì ‘ìˆ˜(ì œì‘ì¤‘)</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ì„œë¹„ìŠ¤ ë°”ë¡œê°€ê¸° -->
        <p class="subtitle_yj">ì„œë¹„ìŠ¤ ë°”ë¡œê°€ê¸°</p>
        <div class="service_yj effect_yj">
            <!-- íšŒì›ì •ë³´ìˆ˜ì • í˜ì´ì§€ ì¶”í›„ ì´ë™ -->
            <a href="" class="direct_yj">
                    <span class="material-symbols-outlined">
                        id_card
                    </span>
                <div class="text_yj">íšŒì›ì •ë³´ìˆ˜ì •</div>
            </a>
            <!-- 1:1ë¬¸ì˜ í˜ì´ì§€ ì¶”í›„ ì´ë™ -->
            <a href="" class="direct_yj">
                    <span class="material-symbols-outlined">
                        contact_support
                    </span>
                <div class="text_yj">1:1ë¬¸ì˜</div>
            </a>
        </div>



    </main>


    <!-- í‘¸í„° -->
    <footer>
        ëŒ€ì¶© ì—°ë½ì²˜ / GitHub ì£¼ì†Œ / ì´ë©”ì¼ ë“± ì…ë ¥ ì˜ˆì •/ í‘¸í„° ë†’ì´ëŠ” í—¤ë” ë°°ë„ˆ ë°˜ì‘ í…ŒìŠ¤íŠ¸ìš©.
    </footer>
</div>

<script>
    (function () {
        const header = document.querySelector('header');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 200) {
                header.style.top = '-120px';
            } else {
                header.style.top = '0';
            }
        });
    })();

    // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            fetch("/logout", {method: "POST"})
                .then(() => window.location.href = "/");
        }

    // DOMì´ ë¡œë“œëœ í›„ ì‹¤í–‰
    document.addEventListener("DOMContentLoaded", function () {
        // ScrollSpy ì´ˆê¸°í™”
        new bootstrap.ScrollSpy(document.body, {
            target: '#list-example',
            offset: 100
        });

        // greeting ì²˜ë¦¬
        const greetingEl = document.getElementById("greeting");
        const ownerName = /*[[${ownerName}]]*/ "";

        const hours = new Date().getHours();
        let timeMessage;

        if (hours < 12) {
            timeMessage = "ì˜¤ëŠ˜ë„ í•¨ê»˜ ê±¸ì–´ê°€ê² ìŠµë‹ˆë‹¤ â˜€ï¸";
        } else if (hours < 18) {
            timeMessage = "ë”°ëœ»í•œ ì˜¤í›„ ë³´ë‚´ì„¸ìš” ğŸŒ¼";
        } else {
            timeMessage = "í¸ì•ˆí•œ ì €ë… ë˜ì„¸ìš” ğŸŒ™";
        }

        greetingEl.textContent = `${ownerName}ë‹˜, ${timeMessage}`;

        // ì»¨í…ì¸  ë°•ìŠ¤ ìŠ¤í¬ë¡¤ íš¨ê³¼
        const boxes = document.querySelectorAll('.effect_yj');
        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('show');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.2 });

        boxes.forEach(effect_yj => {
            observer.observe(effect_yj);
        });
    });

    // ì¥ë¡€ ì˜ˆì•½ ì‹œê°„ ê³„ì‚°
    document.querySelectorAll('.reserv-row_yj').forEach(row => {
        const startEl = row.querySelector('.start-time_yj');
        const endEl = row.querySelector('.end-time_yj');

        if (startEl && endEl) {
            const startTimeStr = startEl.textContent.trim(); // ex: "10:00"
            const [hours, minutes] = startTimeStr.split(':').map(Number);

            // Date ê°ì²´ë¡œ ë§Œë“¤ê³  1ì‹œê°„ ì¶”ê°€
            const date = new Date();
            date.setHours(hours);
            date.setMinutes(minutes);
            date.setSeconds(0);
            date.setMilliseconds(0);

            date.setHours(date.getHours() + 1); // 1ì‹œê°„ ë’¤

            const endHours = String(date.getHours()).padStart(2, '0');
            const endMinutes = String(date.getMinutes()).padStart(2, '0');

            endEl.textContent = `${endHours}:${endMinutes}`;
        }
    });
</script>


</body>

</html>