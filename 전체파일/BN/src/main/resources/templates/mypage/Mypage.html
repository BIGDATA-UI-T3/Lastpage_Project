<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <link crossorigin="anonymous"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
          rel="stylesheet">
    <script crossorigin="anonymous"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Nanum+Myeongjo:wght@400;700&display=swap" rel="stylesheet">

    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/Mypage.css}">

    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
          rel="stylesheet"/>

    <title>마이페이지</title>
</head>

<body>

<div class="header-wrapper">
    <div id="header-container"></div>
</div>

    <main>
        <!-- 상단 배너 -->
        <div class="banner" style="background-image: url('../Asset/Mypage-banner.jpeg');">

            <div class="inner" data-aos="fade-up" data-aos-duration="2000" data-aos-easing="ease-out-cubic">
                <h1>MY PAGE</h1>

                <div class="greeting_yj" style="color: rgba(255,255,255,0.95); margin-top: 10px;">
                    <span th:text="${user}"></span>
                    <span id="timeMessage"></span>
                </div>
            </div>

            <div class="scroll-indicator" onclick="scrollToMainContent()">
                <div class="scroll-icon">
                    <svg class="chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="m6 9 6 6 6-6"/>
                    </svg>
                    <svg class="chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="m6 9 6 6 6-6"/>
                    </svg>
                </div>
            </div>
        </div>

        <!-- 장례예약 -->
        <p class="subtitle_yj">장례예약</p>
        <div class="reserv_yj effect_yj" id="Funeral-wrapper">

            <!-- 상단 헤더 -->
            <div class="reserv-header_yj">
                <div class="reserv-left_yj">
                    <span class="material-symbols-outlined">calendar_month</span>
                    <p>장례예약 내역</p>
                </div>
            </div>

            <!-- 예약 목록이 있을 때 -->
            <div class="reserv-content_yj" th:each="funeral : ${funeralReservationList}">

                <!-- 예약 관리 + 버튼 영역 -->
                <div class="reserv-top_yj">

                    <span class="reserv-title_yj">예약 관리</span>

                    <div class="reserv-actions_yj">


                        <!-- 수정 / 삭제 버튼 그룹 -->
                        <div class="btn-group_yj">
                            <!-- 예약 수정 -->
                            <a th:if="${funeral.id != null}"
                               th:href="@{'/reserve/funeral_reserve?id=' + ${funeral.id}}"
                               class="btn btn-sm btn-outline-primary funeral-edit">
                                예약 변경
                            </a>

                            <!-- 예약 삭제 -->
                            <a href="#"
                               th:attr="data-id=${funeral.id}"
                               class="btn btn-sm btn-outline-danger funeral-delete">
                                예약 취소
                            </a>
                        </div>
                    </div>
                </div>

                <!-- 상세 정보 -->
                <div class="reserv-details_yj">
                    <div><span>신청자명</span><p th:text="${funeral.ownerName}"></p></div>
                    <div><span>장례일</span><p th:text="${funeral.funeralDate}"></p></div>
                    <div><span>시간</span><p th:text="${funeral.time}"></p></div>
                    <div><span>장소</span><p th:text="${funeral.place}"></p></div>
                    <div class="reserv-memo-details_yj" ><span style="margin-bottom:10px;">요청사항</span>
                        <div >
                        <p th:text="${funeral.memo} ?: '-'" style="font-size:15px; font-weight:500;" ></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 예약 내역이 없을 때 -->
            <div class="reserv-content_yj" th:if="${#lists.isEmpty(funeralReserveList)}">
                <p style="color: gray; text-align:center; margin-top:10px;">
                    등록된 장례예약이 없습니다.
                </p>
            </div>

        </div>



        <!-- 상담예약 -->
        <p class="subtitle_yj">상담예약</p>
        <div class="reserv_yj effect_yj" id="Psy-counsel-wrapper">
            <div class="reserv-header_yj">
                <div class="reserv-left_yj">
                    <span class="material-symbols-outlined">diversity_4</span>
                    <p>상담예약 내역</p>
                </div>
            </div>

            <!-- 상담예약 리스트 -->
            <div class="reserv-content_yj" th:each="reserve : ${psyReservationList}">

                <!-- 예약 관리 + 버튼 영역 -->
                <div class="reserv-top_yj">

                    <span class="reserv-title_yj">예약 관리</span>

                    <div class="reserv-actions_yj">
                        <div class="btn-group_yj">
                            <!-- 수정 -->
                            <a th:href="@{'/reserve/psy_reserve?id=' + ${reserve.id}}"
                               class="btn btn-sm btn-outline-primary psy-edit">
                                예약 변경
                            </a>

                            <!-- 삭제 -->
                            <a href="#"
                               th:attr="data-id=${reserve.id}"
                               class="btn btn-sm btn-outline-danger psy-delete">
                                예약 취소
                            </a>
                        </div>
                    </div>
                </div>

                <!-- 상세정보 -->
                <div class="reserv-details_yj">
                    <div><span>예약자명</span><p th:text="${reserve.name}"></p></div>
                    <div><span>상담날짜</span><p th:text="${reserve.consultDate}"></p></div>
                    <div><span>상담시간</span><p th:text="${reserve.time}"></p></div>
                    <div><span>상담사</span><p th:text="${reserve.counselor}"></p></div>
                    <div class="reserv-memo-details_yj"><span style="margin-bottom:10px;">메모</span><p th:text="${reserve.memo} ?: '-'" style="font-size:15px; font-weight:500;"></p></div>
                </div>
            </div>

            <!-- 상담예약 없을 때 -->
            <div class="reserv-content_yj" th:if="${#lists.isEmpty(psyReservationList)}">
                <p style="color: gray; text-align:center; margin-top:10px;">
                    등록된 상담예약이 없습니다.
                </p>
            </div>
        </div>



        <!-- 굿즈 구매내역 -->
        <p class="subtitle_yj">굿즈예약</p>
        <div class="reserv_yj effect_yj" id="Goods-wrapper">

            <div class="reserv-header_yj">
                <div class="reserv-left_yj">
                    <span class="material-symbols-outlined">inventory_2</span>
                    <p>굿즈 구매내역</p>
                </div>
            </div>

            <!-- 굿즈 리스트 -->
            <div class="reserv-content_yj" th:each="item : ${goodsReservationList}">

                <!-- 예약 관리 + 버튼 영역 -->
                <div class="reserv-top_yj">

                    <span class="reserv-title_yj">예약 관리</span>

                    <div class="reserv-actions_yj">
                        <div class="btn-group_yj">

                            <!-- 예약 변경 -->
                            <a th:href="@{'/reserve/goods_reserve?id=' + ${item.id}}"
                               class="btn btn-sm btn-outline-primary goods-edit">
                                예약 변경
                            </a>

                            <!-- 예약 삭제 -->
                            <a href="#"
                               th:attr="data-id=${item.id}"
                               class="btn btn-sm btn-outline-danger goods-delete">
                                예약 취소
                            </a>

                        </div>
                    </div>
                </div>

                <!-- 상세 정보 -->
                <div class="reserv-details_yj">
                    <div><span>구매제품</span><p th:text="${item.product}"></p></div>
                    <div><span>수량</span><p th:text="${item.quantity}"></p></div>
                    <div><span>완성 희망일</span><p th:text="${item.targetDate}"></p></div>
                    <div class="reserv-memo-details_yj">
                        <span style="margin-bottom:10px;">요청사항</span>
                        <div >
                            <p th:text="${item.memo} ?: '-'" style="font-size:15px; font-weight:500;"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 구매 내역 없을 때 -->
            <div class="reserv-content_yj" th:if="${#lists.isEmpty(goodsReservationList)}">
                <p style="color: gray; text-align:center; margin-top:10px;">
                    구매 내역이 없습니다.
                </p>
            </div>
        </div>


        <!-- 서비스 바로가기 -->
        <p class="subtitle_yj">서비스 바로가기</p>
        <div class="service_yj effect_yj" id="Service-wrapper">
            <!-- 회원정보수정 페이지 추후 이동 -->
            <a href="/mypage/EditInfo" class="direct_yj">
                    <span class="material-symbols-outlined">
                        id_card
                    </span>
                <div class="text_yj">회원정보수정</div>
            </a>
            <!-- 1:1문의 페이지 추후 이동 -->
            <a href="/supportService" class="direct_yj">
                    <span class="material-symbols-outlined">
                        contact_support
                    </span>
                <div class="text_yj">1:1문의</div>
            </a>
        </div>
    </main>

<div id="footer-container"></div>
<button id="scrollToTopBtn" title="맨 위로 가기">↑</button>
<script src="/js/mypage.js"></script>
<script src="/js/header.js"></script>
<script src="/js/footer.js"></script>
<script th:src="@{/js/common.js}"></script>

<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<script>
    // 페이지 로드 시 애니메이션 초기화
    AOS.init({
        once: false, // 스크롤 할 때마다 반복 실행 여부
        duration: 800,
        easing: 'ease-out-cubic',
        threshold: 0.1
    });
</script>

</body>
</html>
