<!-- 헤더 -->
<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/Signup.css}">
  <title>반려동물 장례식장</title>
 
</head>



  <div class="header-wrapper">
    <!-- 헤더 -->
    <header>
      <div class="logo">
        <a href="#"><img src="../Asset/LastPage로고_투명.png" alt="로고" /></a>
      </div>
      <nav>
        <ul>
          <li>
            <a href="#">홈</a>
            <ul>
              <li><a href="#">인사말</a></li>
            </ul>
          </li>
          
          <li><a href="#">장례서비스</a></li>
          <li><a href="#">Ourpage</a></li>
          <li>
            <a href="#">심리상담</a>
            <ul>
              <li><a href="#">상담예약</a></li>
              <li><a href="#">예약조회</a></li>
            </ul>
          </li>

          <li>
            <a href="#">추모굿즈</a>
            <ul>
               <li><a href="#">굿즈소개</a></li>
              <li><a href="#">굿즈예약</a></li>
              <li><a href="#">예약조회</a></li>
            </ul>
          </li>
          <li><a href="#">마이페이지</a></li>
          <li><a href="#">고객센터</a></li>
        </ul>
      </nav>
      <div class="auth">
        <a href="#">로그인</a>
        <a href="#">회원가입</a>
      </div>
    

    </header>
</div>



    <!-- 메인 컨텐츠 각자 맡은 컨텐츠 내용 여기에 작성합시다-->

    <!-- 최지원 작업물https://www.neweracapkorea.com/shop/idinfo.html?type=new&first= -->
    <div class="temp" style="width: 100%; height: 100px;"> </div>
 <main class="signup-bg">
    <div class="signup-wrap">
      <h2 class="signup-title">회원가입하기</h2>
      <form class="signup-form-box" autocomplete="off">
        <input type="text" placeholder="이름" required>
        <input type="text" placeholder="아이디" required>
        <input type="password" placeholder="비밀번호 (8~16자 영문 대소문자/숫자/특수문자를 사용하세요.)" required>
        <input type="password" placeholder="비밀번호 확인" required>
        <div class="signup-row email-row">
          <input type="text" class="email-id" placeholder="이메일" required>
          <span class="at">@</span>
          <input type="text" class="email-domain" placeholder="이메일 도메인" required>
          <select class="domain-select">
            <option>직접입력</option>
            <option>naver.com</option>
            <option>gmail.com</option>
            <option>daum.net</option>
          </select>
        </div>
        <div class="signup-row birth-row">
          <input type="text" maxlength="4" placeholder="생년(4자)" required>
          <input type="text" maxlength="2" placeholder="월" required>
          <input type="text" maxlength="2" placeholder="일" required>
        </div>
        <div class="signup-row gender-row">
          <label><input type="radio" name="gender" value="none" required> 선택안함</label>
          <label><input type="radio" name="gender" value="male"> 남</label>
          <label><input type="radio" name="gender" value="female"> 여</label>
        </div>
        <div class="signup-row phone-row">
          <input type="text" class="phone-input" placeholder="휴대폰(본인명의 필수)" required>
          <button type="button" class="signup-btn">인증하기</button>
        </div>
        <div class="signup-row sms-row">
          <input type="text" class="sms-input" placeholder="SMS 인증 번호 입력" required>
          <button type="button" class="signup-btn">확인</button>
        </div>
        <button type="submit" class="signup-btn big">회원가입하기</button>
      </form>
    </div>
  </main>





      <!-- 푸터 -->
      <footer>
        대충 연락처 / GitHub 주소 / 이메일 등 입력 예정/ 푸터 높이는 헤더 배너 반응 테스트용.
      </footer>
      </div>

      <script>
        (function () {
          const header = document.querySelector('header');
          window.addEventListener('scroll', () => {
            if (window.scrollY > 200) {
              header.style.top = '-120px';
            } else {
              header.style.top = '0';
            }
          });
        })();

        // ScrollSpy 강제 초기화
        document.addEventListener("DOMContentLoaded", function () {
          new bootstrap.ScrollSpy(document.body, {
            target: '#list-example',
            offset: 100
          });
        });

         document.querySelector('.signup-btn.big').addEventListener('click', async (event) => {
  event.preventDefault(); // 폼 기본 제출 막기

  const data = {
    name: document.querySelector('input[placeholder="이름"]').value,
    id: document.querySelector('input[placeholder="아이디"]').value,
    password: document.querySelector('input[placeholder="비밀번호 (8~16자 영문 대소문자/숫자/특수문자를 사용하세요.)"]').value,
    confirm_password: document.querySelector('input[placeholder="비밀번호 확인"]').value,
    emailId: document.querySelector('.email-id').value,
    emailDomain: document.querySelector('.email-domain').value,
    year: document.querySelector('input[placeholder="생년(4자)"]').value,
    month: document.querySelector('input[placeholder="월"]').value,
    day: document.querySelector('input[placeholder="일"]').value,
    gender: document.querySelector('input[name="gender"]:checked')?.value === 'male' ? 'M' :
            document.querySelector('input[name="gender"]:checked')?.value === 'female' ? 'F' : 'N',
    phone_num: document.querySelector('.phone-input').value,
    sms_auth_number: document.querySelector('.sms-input').value,
  };

  const response = await fetch('/userinfoSave', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(data)
  });

  if (response.ok) {
    const id = await response.text();
    alert('회원가입 성공!');
    window.location.href = `/signin/Signin?id=${id}`;
  } else {
    alert('저장 중 오류가 발생했습니다.');
  }
});
      </script>
</body>

</html>