<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <!-- 공통영역 -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" rel="stylesheet">
    <script crossorigin="anonymous"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" th:href="@{/css/Mypage.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
          rel="stylesheet" />

    <title>마이페이지</title>
</head>

<body data-bs-offset="100" data-bs-spy="scroll" data-bs-target="#list-example" tabindex="0">

<!-- 사이드 ScrollSpy 배너 -->
<div class="list-group" id="list-example">
    <a class="list-group-item list-group-item-action" href="#Commu-wrapper">Ourpage</a>
    <a class="list-group-item list-group-item-action" href="#Funeral-wrapper">장례서비스</a>
    <a class="list-group-item list-group-item-action" href="#Psy-counsel-wrapper">심리치료</a>
    <a class="list-group-item list-group-item-action" href="#Goods-wrapper">추모물품</a>
</div>

<div class="header-wrapper">
    <!-- 헤더 -->
    <header>
        <div class="logo">
            <a href="#"><img alt="로고" src="../Asset/LastPage로고_투명.png" /></a>
        </div>
        <nav>
            <ul>
                <li>
                    <a href="#">홈</a>
                    <ul>
                        <li><a href="#">인사말</a></li>
                    </ul>
                </li>

                <li><a href="#">장례서비스</a></li>
                <li><a href="#">Ourpage</a></li>
                <li>
                    <a href="#">심리상담</a>
                    <ul>
                        <li><a th:href="@{/reserve/psy_reserve}">상담예약</a></li>
                        <li><a href="#">예약조회</a></li>
                    </ul>
                </li>

                <li>
                    <a href="#">추모굿즈</a>
                    <ul>
                        <li><a href="#">굿즈소개</a></li>
                        <li><a href="#">굿즈예약</a></li>
                        <li><a href="#">예약조회</a></li>
                    </ul>
                </li>
                <li><a href="#">마이페이지</a></li>
                <li><a href="#">고객센터</a></li>
            </ul>
        </nav>
        <div class="auth">
            <a href="#">로그인</a>
            <a href="#">회원가입</a>
        </div>
    </header>

    <!-- 메인 -->
    <main>
        <!-- 인삿말 -->
        <div class="hello_yj">
            <div class="logo_yj">
                <img alt="" src="../Asset/LastPage로고_투명.png" style="width: 300px;" />
            </div>
            <div class="mypage_yj">
                <p>MY PAGE</p>
                <div class="greeting_yj" id="greeting"></div>
            </div>
        </div>

        <!-- 장례예약 -->
        <p class="subtitle_yj">예약내역</p>
        <div class="reserv_yj effect_yj">
            <div class="reserv-header_yj">
                <div class="reserv-left_yj">
                        <span class="material-symbols-outlined">
                            calendar_month
                        </span>
                    <p>장례예약</p>
                </div>
                <a href="">예약변경 | 취소 ></a>
            </div>
            <div class="reserv-content_yj">
                <div class="reserv-row_yj">
                    <div class="time-info_yj">
                        <p class="start-time_yj">10:00</p>
                    </div>
                    <div class="icon-duration_yj">
                        <span class="material-symbols-outlined">line_start</span>
                        <span class="material-symbols-outlined">local_florist</span>
                        <span class="material-symbols-outlined">line_end</span>
                        <p>01시간 30분</p>
                    </div>
                    <div class="time-info_yj">
                        <p class="end-time_yj">11:30</p>
                    </div>
                </div>
                <div class="reserv-details_yj">
                    <div>
                        <span>예약날짜</span>
                        <p>2025-10-01</p>
                    </div>
                    <div>
                        <span>예약장소</span>
                        <p>대구</p>
                    </div>
                    <div>
                        <span>요청사항</span>
                        <p>잘 부탁드립니다.</p>
                    </div>
                    <div>
                        <span>예약상태</span>
                        <button>예약완료</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 상담예약 (Thymeleaf 동적 데이터 반영) -->
        <div class="reserv_yj effect_yj">
            <div class="reserv-header_yj">
                <div class="reserv-left_yj">
                    <span class="material-symbols-outlined">diversity_4</span>
                    <p>상담예약</p>
                </div>
                <a th:href="@{/reserve/psy_reserve}">예약변경 | 취소 ></a>
            </div>

            <!-- 예약 데이터 있을 때 -->
            <div class="reserv-content_yj" th:if="${reserve != null}">
                <div class="reserv-details_yj">
                    <div>
                        <span>상담날짜</span>
                        <p th:text="${reserve.consultDate}"></p>
                    </div>
                    <div>
                        <span>상담시간</span>
                        <p th:text="${reserve.time}"></p>
                    </div>
                    <div>
                        <span>상담사</span>
                        <p th:text="${reserve.counselor}"></p>
                    </div>
                    <div>
                        <span>메모</span>
                        <p th:text="${reserve.memo}"></p>
                    </div>
                    <div>
                        <span>예약상태</span>
                        <button>예약완료</button>
                    </div>
                </div>
            </div>

            <!-- 예약 데이터 없을 때 -->
            <div class="reserv-content_yj" th:if="${reserve == null}">
                <div class="reserv-details_yj">
                    <p style="color: gray;">등록된 상담예약이 없습니다.</p>
                </div>
            </div>
        </div>

        <!-- 굿즈 구매내역 -->
        <div class="reserv_yj effect_yj">
            <div class="reserv-header_yj">
                <div class="reserv-left_yj">
                    <span class="material-symbols-outlined">shoppingmode</span>
                    <p>구매내역</p>
                </div>
                <a href=""> 구매취소 ></a>
            </div>
            <div class="reserv-content_yj">
                <div class="reserv-details_yj">
                    <div>
                        <span>구매제품</span>
                        <p>메모리얼 스톤</p>
                    </div>
                    <div>
                        <span>수량</span>
                        <p>1</p>
                    </div>
                    <div>
                        <span>구매일</span>
                        <p>2025-11-01</p>
                    </div>
                    <div>
                        <span>배송현황</span>
                        <button>주문접수(제작중)</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 서비스 바로가기 -->
        <p class="subtitle_yj">서비스 바로가기</p>
        <div class="service_yj effect_yj">
            <a class="direct_yj" href="">
                <span class="material-symbols-outlined">id_card</span>
                <div class="text_yj">회원정보수정</div>
            </a>
            <a class="direct_yj" href="">
                <span class="material-symbols-outlined">contact_support</span>
                <div class="text_yj">1:1문의</div>
            </a>
        </div>
    </main>

    <!-- 푸터 -->
    <footer>
        대충 연락처 / GitHub 주소 / 이메일 등 입력 예정/ 푸터 높이는 헤더 배너 반응 테스트용.
    </footer>
</div>

<script>
    (function () {
        const header = document.querySelector('header');
        window.addEventListener('scroll', () => {
            header.style.top = window.scrollY > 200 ? '-120px' : '0';
        });
    })();

    const greetingEl = document.getElementById("greeting");
    const userName = "가나다";
    const hours = new Date().getHours();
    let timeMessage;
    if (hours < 12) timeMessage = "오늘도 함께 걸어가겠습니다 ☀️";
    else if (hours < 18) timeMessage = "따뜻한 오후 보내세요 🌼";
    else timeMessage = "편안한 저녁 되세요 🌙";
    greetingEl.textContent = `${userName}님, ${timeMessage}`;

    document.addEventListener("DOMContentLoaded", function () {
        new bootstrap.ScrollSpy(document.body, {
            target: '#list-example',
            offset: 100
        });
    });

    const boxes = document.querySelectorAll('.effect_yj');
    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('show');
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.2 });
    boxes.forEach(effect_yj => observer.observe(effect_yj));
</script>
</body>
</html>
