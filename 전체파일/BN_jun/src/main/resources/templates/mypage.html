<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- 공통영역 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <!-- <link rel="stylesheet" href="./common.html"> -->
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/mypage.css}">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <title>마이페이지</title>

</head>

<body data-bs-spy="scroll" data-bs-target="#list-example" data-bs-offset="100" tabindex="0">

<!-- 사이드 ScrollSpy 배너 -->
<div id="list-example" class="list-group">
    <a class="list-group-item list-group-item-action" href="#Commu-wrapper">Ourpage</a>
    <a class="list-group-item list-group-item-action" href="#Funeral-wrapper">장례서비스</a>
    <a class="list-group-item list-group-item-action" href="#Psy-counsel-wrapper">심리치료</a>
    <a class="list-group-item list-group-item-action" href="#Goods-wrapper">추모물품</a>
</div>

<div class="header-wrapper">
    <!-- 헤더 -->
    <header>
        <div class="logo">
            <a href="#"><img th:src="@{/asset/LastPage로고_투명.png}" alt="로고" /></a>
        </div>
        <nav>
            <ul>
                <li>
                    <a href="#">홈</a>
                    <ul>
                        <li><a href="#">인사말</a></li>
                    </ul>
                </li>

                <li><a href="#">장례서비스</a></li>
                <li><a href="#">Ourpage</a></li>
                <li>
                    <a href="#">심리상담</a>
                    <ul>
                        <li><a href="#">상담예약</a></li>
                        <li><a href="#">예약조회</a></li>
                    </ul>
                </li>

                <li>
                    <a href="#">추모굿즈</a>
                    <ul>
                        <li><a href="#">굿즈소개</a></li>
                        <li><a href="#">굿즈예약</a></li>
                        <li><a href="#">예약조회</a></li>
                    </ul>
                </li>
                <li><a href="#">마이페이지</a></li>
                <li><a href="#">고객센터</a></li>
            </ul>
        </nav>
        <div class="auth">
            <a th:href="@{/logout}">로그아웃</a>
        </div>
    </header>

    <!-- 메인 -->
    <main>
        <!-- 인삿말 -->
        <div class="hello_yj">
            <div class="logo_yj">
                <img style="width: 300px;" th:src="@{/asset/LastPage로고_투명.png}" alt="" />
            </div>
            <div class="mypage_yj">
                <p>MY PAGE</p>
                <div class="greeting_yj" id="greeting"></div>
            </div>
        </div>

        <!-- 장례예약 -->
        <p class="subtitle_yj">예약내역</p>
        <div class="reserv_yj effect_yj">
            <div class="reserv-header_yj">
                <div class="reserv-left_yj">
                        <span class="material-symbols-outlined">
                            calendar_month
                        </span>
                    <p>장례예약</p>
                </div>
                <!-- 예약내역 페이지 추후 이동 -->
                <a href="">예약변경 | 취소 ></a>
            </div>
            <!-- 예약내역 테이블 -->
            <div class="reserv-content_yj">
                <div class="reserv-row_yj">
                    <div class="time-info_yj">
                        <!-- 추후 예약내용 적용 -->
                        <p class="start-time_yj">10:00</p>
                    </div>
                    <div class="icon-duration_yj">
                            <span class="material-symbols-outlined">
                                line_start
                            </span>
                        <span class="material-symbols-outlined">
                                local_florist
                            </span>
                        <span class="material-symbols-outlined">
                                line_end
                            </span>
                        <p>01시간 30분</p>
                    </div>
                    <div class="time-info_yj">
                        <p class="end-time_yj">11:30</p>
                    </div>
                </div>

                <!-- 추후 예약내용 연결 -->
                <div class="reserv-details_yj">
                    <div>
                        <span>예약날짜</span>
                        <p>2025-10-01</p>
                    </div>
                    <div>
                        <span>예약장소</span>
                        <p>대구</p>
                    </div>
                    <div>
                        <span>요청사항</span>
                        <p>잘 부탁드립니다.</p>
                    </div>
                    <div>
                        <span>예약상태</span>
                        <button>예약완료</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 상담예약 -->
        <div class="reserv_yj effect_yj">
            <div class="reserv-header_yj">
                <div class="reserv-left_yj">
                        <span class="material-symbols-outlined">
                            diversity_4
                        </span>
                    <p>상담예약</p>
                </div>
                <!-- 예약내역 페이지 추후 이동 -->
                <a href="">예약변경 | 취소 ></a>
            </div>
            <!-- 예약내역 테이블 -->
            <div class="reserv-content_yj">
                <!-- 추후 예약내용 연결 -->
                <div class="reserv-details_yj">
                    <div>
                        <span>상담날짜</span>
                        <p>2025-10-11</p>
                    </div>
                    <div>
                        <span>상담시간</span>
                        <p>10:00-11:00</p>
                    </div>
                    <div>
                        <span>상담사</span>
                        <p>심예진 상담사</p>
                    </div>
                    <div>
                        <span>메모</span>
                        <p>힘들어요 ㅜㅜ</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- 굿즈 구매내역 -->
        <div class="reserv_yj effect_yj">
            <div class="reserv-content_yj" th:each="item : ${goodsReservationList}">

                <div class="reserv-details_yj">
                    <div>
                        <span>구매제품</span>
                        <p th:text="${item.product}"></p>
                    </div>
                    <div>
                        <span>수량</span>
                        <p th:text="${item.quantity}"></p>
                    </div>
                    <div>
                        <span>완성 희망일</span>
                        <p th:text="${item.targetDate}"></p>
                    </div>
                    <div>
                        <span>요청사항</span>
                        <p th:text="${item.memo}"></p>
                    </div>
                </div>
            </div>

            <div class="reserv-content_yj" th:if="${#lists.isEmpty(goodsReservationList)}">
                <p style="text-align: center; padding: 20px;">구매 내역이 없습니다.</p>
            </div>
        </div>

        <!-- 서비스 바로가기 -->
        <p class="subtitle_yj">서비스 바로가기</p>
        <div class="service_yj effect_yj">
            <!-- 회원정보수정 페이지 추후 이동 -->
            <a href="" class="direct_yj">
                    <span class="material-symbols-outlined">
                        id_card
                    </span>
                <div class="text_yj">회원정보수정</div>
            </a>
            <!-- 1:1문의 페이지 추후 이동 -->
            <a href="" class="direct_yj">
                    <span class="material-symbols-outlined">
                        contact_support
                    </span>
                <div class="text_yj">1:1문의</div>
            </a>
        </div>



    </main>


    <!-- 푸터 -->
    <footer>
        대충 연락처 / GitHub 주소 / 이메일 등 입력 예정/ 푸터 높이는 헤더 배너 반응 테스트용.
    </footer>
</div>

<script>
    (function () {
        const header = document.querySelector('header');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 200) {
                header.style.top = '-120px';
            } else {
                header.style.top = '0';
            }
        });
    })();

    const greetingEl = document.getElementById("greeting");
    const userName = "가나다";

    const hours = new Date().getHours();
    let timeMessage;

    if (hours < 12) {
        timeMessage = "오늘도 함께 걸어가겠습니다 ☀️";
    } else if (hours < 18) {
        timeMessage = "따뜻한 오후 보내세요 🌼";
    } else {
        timeMessage = "편안한 저녁 되세요 🌙";
    }

    greetingEl.textContent = `${userName}님, ${timeMessage}`;

    // ScrollSpy 강제 초기화
    document.addEventListener("DOMContentLoaded", function () {
        new bootstrap.ScrollSpy(document.body, {
            target: '#list-example',
            offset: 100
        });
    });

    // 컨텐츠 박스 스크롤 효과
    const boxes = document.querySelectorAll('.effect_yj');

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('show');
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.2 });

    boxes.forEach(effect_yj => {
        observer.observe(effect_yj);
    });
</script>

</body>

</html>