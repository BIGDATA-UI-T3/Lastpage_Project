<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>장례 예약</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="../CSS/reservepage.css">

<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css" rel="stylesheet">
</head>
<body>

  <div id="calendar"></div>
  <!-- 카드 안, 달력 아래에 붙이기 -->
<section class="time-picker">
  <div class="seg">
    <button class="seg-btn is-active" data-seg="am">오전</button>
    <button class="seg-btn" data-seg="pm">오후</button>
  </div>

  <div class="slot-grid" id="slotGrid">
    <!-- JS가 칩을 그려 넣음 -->
  </div>

  <div class="summary" id="summary">날짜와 시간을 선택해주세요</div>
  <button class="btn-primary next" disabled id="nextBtn">다음</button>
</section>







<script>
  // 예시: 30분 간격 AM/PM 슬롯 (실제 가용여부는 서버 응답으로 덮어쓰기)
  const AM = ["07:00","07:30","08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30"];
  const PM = ["12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00"];
  let selectedDate = null;   // 달력에서 선택되면 채워 넣어
  let selectedTime = null;
  let currentSeg = "am";

  const grid = document.getElementById('slotGrid');
  const summary = document.getElementById('summary');
  const nextBtn = document.getElementById('nextBtn');

  function renderSlots(){
    const list = currentSeg === 'am' ? AM : PM;
    grid.innerHTML = "";
    list.forEach(t=>{
      const btn = document.createElement('button');
      btn.className = "slot";
      btn.textContent = t;
      // 예시: 가용여부. 실제로는 API로 가져온 배열로 처리
      const disabled = false; 
      if(disabled) btn.classList.add('is-disabled');
      btn.onclick = ()=>{
        document.querySelectorAll('.slot.is-selected').forEach(b=>b.classList.remove('is-selected'));
        btn.classList.add('is-selected');
        selectedTime = t;
        updateSummary();
      };
      grid.appendChild(btn);
    });
  }
  function updateSummary(){
    if(selectedDate && selectedTime){
      summary.textContent = `${selectedDate} ${selectedTime} 예약을 진행합니다`;
      nextBtn.disabled = false;
    }else{
      summary.textContent = "날짜와 시간을 선택해주세요";
      nextBtn.disabled = true;
    }
  }
  document.querySelectorAll('.seg-btn').forEach(b=>{
    b.onclick = ()=>{
      document.querySelector('.seg-btn.is-active')?.classList.remove('is-active');
      b.classList.add('is-active');
      currentSeg = b.dataset.seg;
      renderSlots();
    }
  });

  // 달력 라이브러리 연동 시, 날짜 클릭 이벤트에서 selectedDate 업데이트
  // 예: selectedDate = "2025.08.12"; updateSummary();

  renderSlots();




  
</script>

  </main>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css" rel="stylesheet">
<link href="calendar.css" rel="stylesheet">

<div id="calendar"></div>

<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const calendarEl = document.getElementById('calendar');
  const calendar = new FullCalendar.Calendar(calendarEl, {
    initialView: 'dayGridMonth',
    locale: 'ko',
    headerToolbar: {
      left: 'prev,next',
      center: 'title',
      right: ''
    },
    height: 'auto',
    contentHeight: 'auto',
    selectable: true
   
  });
  calendar.render();
});
</script>

  <!-- 연결만 바꿔 쓰면 됨 -->
  <script>
    // TODO: 실제 링크/라우팅으로 교체
    document.getElementById('btnLookup')   .onclick = () => location.href = '/reservation/lookup.html';
    document.getElementById('btnPetForest').onclick = () => location.href = '/reservation/petforest.html';
    document.getElementById('btnNaver')    .onclick = () => window.open('https://booking.naver.com','_blank');
    document.getElementById('btnKakao')    .onclick = () => window.open('https://pf.kakao.com','_blank');
    document.getElementById('btnPhone')    .onclick = () => location.href = '/support/phone.html';
    document.getElementById('btnCall')     .onclick = () => location.href = 'tel:010-1234-5678';
  </script>
</body>
</html>
